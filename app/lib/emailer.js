// Generated by CoffeeScript 1.6.3
var Emailer,emailer,exports,fs,userinfo,_;emailer=require("nodemailer");fs=require("fs");_=require("underscore");userinfo=require("../userinfo");Emailer=function(){function e(e,t){this.options=e;this.data=t}e.prototype.options={};e.prototype.data={};e.prototype.send=function(e){var t,n,r;t=this.getHtml(this.options.template,this.data);n={to:"'"+this.options.to.name+" <"+this.options.to.email+">",from:"'fourvolt.com'",subject:this.options.subject,html:t,generateTextFromHTML:!0};r=this.getTransport();return r.sendMail(n,e)};e.prototype.getTransport=function(){return emailer.createTransport("SMTP",{service:"Gmail",auth:{user:userinfo.user,pass:userinfo.pass}})};e.prototype.getHtml=function(e,t){var n,r,i;i=__dirname+("/../views/emails/"+e+".html");r=fs.readFileSync(i,n="utf8");return _.template(r,t,{interpolate:/\{\{(.+?)\}\}/g})};return e}();exports=module.exports=Emailer;